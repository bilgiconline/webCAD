(function(){var c=c||{};c.scope={};c.createTemplateTagFirstArg=function(b){return b.raw=b};c.createTemplateTagFirstArgWithRaw=function(b,d){b.raw=d;return b};c.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};c.arrayIterator=function(b){return{next:c.arrayIteratorImpl(b)}};
c.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if(d)return d.call(b);if("number"==typeof b.length)return c.arrayIterator(b);throw Error(String(b)+" is not an iterable or ArrayLike");};c.ASSUME_ES5=!1;c.ASSUME_NO_NATIVE_MAP=!1;c.ASSUME_NO_NATIVE_SET=!1;c.SIMPLE_FROUND_POLYFILL=!1;c.ISOLATE_POLYFILLS=!1;c.FORCE_POLYFILL_PROMISE=!1;c.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
c.defineProperty=c.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,f){if(b==Array.prototype||b==Object.prototype)return b;b[d]=f.value;return b};c.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<b.length;++d){var f=b[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};c.global=c.getGlobal(this);
c.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");c.TRUST_ES6_POLYFILLS=!c.ISOLATE_POLYFILLS||c.IS_SYMBOL_NATIVE;c.polyfills={};c.propertyToPolyfillSymbol={};c.POLYFILL_PREFIX="$jscp$";c.polyfill=function(b,d,f,k){d&&(c.ISOLATE_POLYFILLS?c.polyfillIsolated(b,d,f,k):c.polyfillUnisolated(b,d,f,k))};
c.polyfillUnisolated=function(b,d){var f=c.global;b=b.split(".");for(var k=0;k<b.length-1;k++){var m=b[k];if(!(m in f))return;f=f[m]}b=b[b.length-1];k=f[b];d=d(k);d!=k&&null!=d&&c.defineProperty(f,b,{configurable:!0,writable:!0,value:d})};
c.polyfillIsolated=function(b,d,f){var k=b.split(".");b=1===k.length;var m=k[0];m=!b&&m in c.polyfills?c.polyfills:c.global;for(var q=0;q<k.length-1;q++){var t=k[q];if(!(t in m))return;m=m[t]}k=k[k.length-1];f=c.IS_SYMBOL_NATIVE&&"es6"===f?m[k]:null;d=d(f);null!=d&&(b?c.defineProperty(c.polyfills,k,{configurable:!0,writable:!0,value:d}):d!==f&&(void 0===c.propertyToPolyfillSymbol[k]&&(b=1E9*Math.random()>>>0,c.propertyToPolyfillSymbol[k]=c.IS_SYMBOL_NATIVE?c.global.Symbol(k):c.POLYFILL_PREFIX+b+"$"+
k),c.defineProperty(m,c.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:d})))};c.polyfill("Array.from",function(b){return b?b:function(d,f,k){f=null!=f?f:function(v){return v};var m=[],q="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];if("function"==typeof q){d=q.call(d);for(var t=0;!(q=d.next()).done;)m.push(f.call(k,q.value,t++))}else for(q=d.length,t=0;t<q;t++)m.push(f.call(k,d[t],t));return m}},"es6","es3");
c.polyfill("Object.is",function(b){return b?b:function(d,f){return d===f?0!==d||1/d===1/f:d!==d&&f!==f}},"es6","es3");c.polyfill("Array.prototype.includes",function(b){return b?b:function(d,f){var k=this;k instanceof String&&(k=String(k));var m=k.length;f=f||0;for(0>f&&(f=Math.max(f+m,0));f<m;f++){var q=k[f];if(q===d||Object.is(q,d))return!0}return!1}},"es7","es3");
c.checkStringArgs=function(b,d,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};c.polyfill("String.prototype.includes",function(b){return b?b:function(d,f){return-1!==c.checkStringArgs(this,d,"includes").indexOf(d,f||0)}},"es6","es3");
window.FieldPicker=function(b,d){function f(a){g.Options&&g.Options.updater&&"function"===typeof g.Options.updater&&g.Options.updater(g.Selected,a,g)}function k(a){var e=c.makeIterator(a).next().value,h=e.cname;e=e.code;a=a.every(function(r){return r.checked});return'\n      <div class="field-picker-row-container">\n        <div class="field-picker-title clickable">'+h+'</div>\n        <div class="field-picker-checkbox-container">\n          <label for="field-'+e+'" class="field-picker-checkbox-label field-picker-checkbox-group">\n            <input id="field-'+
e+'" type="checkbox" name="field-'+e+'" value="'+e+'" '+(a?"checked":"")+'>\n            <span class="field-checkbox-item clickable"></span>\n          </label>\n        </div>\n      </div>\n    '}function m(a){var e=a.cname,h=a.code,r=a.children;a=a.checked?"checked":"";var n='\n      <div class="field-picker-row-container">\n        <div class="field-picker-title">'+e+'</div>\n        <div class="field-picker-checkbox-container">\n          <label for="field-'+h+'" class="field-picker-checkbox-label field-picker-checkbox-group">\n            <input id="field-'+
h+'" type="checkbox" name="field-'+h+'" value="'+h+'" '+a+'>\n            <span class="field-checkbox-item clickable"></span>\n          </label>\n        </div>\n      </div>\n    ';r&&r.length&&(n=!r.every(function(p){return p.checked})&&r.some(function(p){return p.checked}),n='\n        <div class="field-picker-row-container">\n          <div class="field-picker-menu-group">\n            <div class="field-picker-sign clickable">+</div>\n            <div class="field-picker-title clickable">'+e+
'</div>\n          </div>\n          <div class="field-picker-checkbox-container">\n            <label for="field-'+h+'" class="field-picker-checkbox-label field-picker-checkbox-group">\n              <input id="field-'+h+'" type="checkbox" name="field-'+h+'" value="'+h+'" '+a+'>\n              <span class="field-checkbox-item clickable '+(n?"is-indeterminate":"")+'"></span>\n            </label>\n          </div>\n        </div>\n        '+q(r)+"\n      ");return'\n      <div class="field-picker-item-group">\n        '+
n+"\n      </div>\n    "}function q(a){return a&&a.length?'\n      <div class="field-picker-children-group field-picker-groups hide">\n        '+a.map(function(e){return m(e)}).join("")+"\n      </div>\n    ":""}function t(a,e){e='\n      <div id="'+e+'" class="field-picker-container no-select '+(g.Visiable?"":"hide")+'">\n        <div class="field-picker-item-group">\n          '+k(g.Fields.RootField)+'\n          <div class="field-picker-children-group field-picker-top-groups">\n            '+g.Fields.MainField.map(function(h){return m(h)}).join("")+
"\n          </div>\n        </div>\n      </div>\n    ";document.querySelector(a).innerHTML=e}function v(){var a=document.getElementById(g.ComponentId);a=Array.from(a.querySelectorAll(".field-picker-checkbox-label input[type=checkbox]"));a.forEach(function(e){x(e)});g.Selected=a.map(function(e){return e.checked?e.value:null}).filter(function(e){return e});f("change")}function A(){document.getElementById(g.ComponentId).addEventListener("click",function(a){if(a=a.target.closest(".field-picker-checkbox-label input[type=checkbox]"))"field-all"==
a.value?y(a,!0):y(a),v()},!1)}function x(a){var e=document.getElementById(g.ComponentId),h=e.querySelectorAll(".field-picker-top-groups > .field-picker-item-group"),r=a.closest(".field-picker-item-group");Array.from(h).forEach(function(p){if(p==r){var l=p.querySelector(".field-checkbox-item"),u=Array.from(p.querySelectorAll(".field-picker-groups input[type=checkbox]"));p=Array.from(p.querySelectorAll(".field-picker-groups input[type=checkbox]:checked"));var C=u.filter(function(B){return g.Skips.includes(B.value)}).length;
if(p.length){var z=l.closest(".field-picker-checkbox-group").querySelector("input[type=checkbox]");z.checked=!1;u.length<=p.length+C?(l.classList.remove("is-indeterminate"),l.classList.add("checked"),z.checked=!0):(0<p.length?l.classList.add("is-indeterminate"):l.classList.remove("is-indeterminate"),l.classList.remove("checked"))}}});a=e.querySelectorAll(".field-picker-top-groups > .field-picker-item-group > .field-picker-row-container input[type=checkbox]:checked");e=document.querySelector(".field-picker-item-group #field-all");
var n=e.closest(".field-picker-checkbox-group").querySelector(".field-checkbox-item");e.checked=!1;a.length==h.length?(n.classList.remove("is-indeterminate"),n.classList.add("checked"),e.checked=!0):1<a.length?(n.classList.remove("checked"),n.classList.add("is-indeterminate")):(n.classList.remove("checked"),n.classList.remove("is-indeterminate"))}function y(a){var e=a.checked,h=a.closest(".field-picker-item-group").querySelector(".field-picker-children-group");D(h,e);x(a)}function D(a,e){a&&a.querySelectorAll("input[type=checkbox]").forEach(function(h){g.Skips.includes(h.value)||
(h.checked=e)})}function w(a,e){if(a){var h=a.closest(".field-picker-item-group").querySelector(".field-picker-children-group");"string"===typeof e?"expand"===e?(h.classList.remove("hide"),a.textContent="-"):"collapse"===e&&(h.classList.add("hide"),a.textContent="+"):h.classList.contains("hide")?(h.classList.remove("hide"),a.textContent="-"):(h.classList.add("hide"),a.textContent="+")}}function E(){document.getElementById(g.ComponentId).addEventListener("click",function(a){a=a.target.closest(".field-picker-sign");
w(a)})}function F(){document.getElementById(g.ComponentId).addEventListener("click",function(a){if(a.target.closest(".field-picker-title")){var e=a.target.closest(".field-picker-menu-group");e?(a=e.querySelector(".field-picker-sign"))&&w(a):(a=a.target.closest(".field-picker-item-group").querySelector(".field-picker-children-group"))&&(a=a.querySelectorAll(".field-picker-sign"))&&(Array.from(a).map(function(h){return"-"==h.innerHTML.trim()}).filter(function(h){return h}).length!==a.length?a.forEach(function(h){w(h,
"expand")}):a.forEach(function(h){w(h)}))}})}var g={ComponentId:"",Options:{},Selected:[],Fields:{RootField:{},MainField:[]},Skips:[],Visiable:!1,GetSelected:function(){return this.Selected},Show:function(){var a=document.getElementById(g.ComponentId);a.className=a.className.replace(/\s?hide/g,"");g.Visiable=!0},Hide:function(){var a=document.getElementById(g.ComponentId);a.className+=" hide";g.Visiable=!1;f("submit")}};return function(a,e){var h="field-picker-"+Math.random().toString(36).slice(-6);
g.ComponentId=h;g.Options=e;var r=e.data,n=e.preselected,p=e.skips;g.Visiable=!!e.visiable;g.Fields.RootField=[r[0]];g.Fields.MainField=r.slice(1);e=r.map(function(l){return l.children&&l.children.length?l.children.filter(function(u){return u.checked}):!1}).filter(function(l){return l}).reduce(function(l,u){return l.concat(u)},[]).map(function(l){return l.code});g.Selected=e;n&&("string"===typeof n?"all"===n?g.Selected=g.Fields.MainField.map(function(l){return l.code}).concat(g.Fields.RootField.map(function(l){return l.code})):
g.Selected.includes(n)||(g.Selected=g.Selected.concat(n)):n&&n.length&&n.forEach(function(l){g.Selected.includes(l)||(g.Selected=g.Selected.concat(l))}));p&&("string"===typeof p?g.Skips=[p]:p.length&&(g.Skips=p));t(a,h);E();F();A();v();f("init");return g}(b,d)};}).call(this);
